{{define "dashboard/traffic"}}
{{template "common/header" .}}
{{template "common/menu" .}}
<div class="nb-container">
    <div class="ui container">
        {{if .CycleTransferStats}}
        <h2 style="text-align: center;">{{tr "CycleTransferStats"}}</h2>
        <table class="ui celled table">
            <thead>
                <tr>
                    <th class="ui center aligned">ID</th>
                    <th class="ui center aligned">{{tr "Rules"}}</th>
                    <th class="ui center aligned">{{tr "Server"}}</th>
                    <th class="ui center aligned">{{tr "From"}}</th>
                    <th class="ui center aligned">{{tr "To"}}</th>
                    <th class="ui center aligned">MAX</th>
                    <th class="ui center aligned">MIN</th>
                    <th class="ui center aligned">{{tr "NextCheck"}}</th>
                    <th class="ui center aligned">{{tr "CurrentUsage"}}</th>
                    <th class='ui center aligned' style='padding: 0px 31px 0px 31px;'>{{tr "Transleft"}}</th>
                </tr>
            </thead>
            <tbody>
                {{range $id, $stats := .CycleTransferStats}}
                {{range $innerId, $transfer := $stats.Transfer}}
                <tr>
                    <td class="ui center aligned">{{$id}}</td>
                    <td class="ui center aligned">{{$stats.Name}}</td>
                    <td class="ui center aligned">{{index $stats.ServerName $innerId}}</td>
                    <td class="ui center aligned">{{$stats.From|tf}}</td>
                    <td class="ui center aligned">{{$stats.To|tf}}</td>
                    <td class="ui center aligned">{{$stats.Max|bf}}</td>
                    <td class="ui center aligned">{{$stats.Min|bf}}</td>
                    <td class="ui center aligned">{{(index $stats.NextUpdate $innerId)|sft}}</td>
                    <td class="ui center aligned">{{$transfer|bf}}</td>
                    <td class="ui center aligned" style="padding: 14px 0px 0px 0px; position: relative;">
                        <div class="thirteen wide column">
                            <div class="ui progress fine">
                                <div class="bar"
                                    style="transition-duration: 300ms; width: {{Transleft (UintToFloat $transfer) (UintToFloat $stats.Max)}}% !important;">
                                </div><small style="position: absolute; top: 4px; margin-left: -20px;">{{Transleft
                                    (UintToFloat $transfer) (UintToFloat $stats.Max)}}%</small>
                            </div>
                        </div>
                    </td>
                </tr>
                {{end}}
                {{end}}
            </tbody>
        </table>
        {{end}}
    </div>
</div>
{{template "common/footer" .}}
{{end}}